(this.webpackJsonpkino=this.webpackJsonpkino||[]).push([[0],{12:function(e,t,n){e.exports={space:"Reservation_space__3DaUI",seat:"Reservation_seat__3xJMx",reserved:"Reservation_reserved__2C3OL",selected:"Reservation_selected__3dpJc",info:"Reservation_info__2soKp",infoText:"Reservation_infoText__2CHoA"}},44:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(18),r=n.n(s),i=(n(44),n(39)),o=n(6),l=n(14),j=n(15),d=n(73),u=n(75),b=n(8),m=n(21),h=Object(m.b)({name:"cinema",initialState:{seatsSelected:[],seatsNumber:0,seatsNext:!0},reducers:{makeReservation:function(e,t){e.seatsSelected=[],e.seatsNumber=t.payload.seatsNumber,e.seatsNext=t.payload.seatsNext},select:function(e,t){e.seatsSelected=[].concat(Object(l.a)(e.seatsSelected),[t.payload])},unselect:function(e,t){e.seatsSelected=e.seatsSelected.filter((function(e){return e.id!==t.payload.id}))}}}),f=h.actions,O=f.makeReservation,x=f.select,v=f.unselect,p=function(e){return e.cinema},y=h.reducer,g=n(12),w=n.n(g),N=n(2),S=function(e){var t=Object(b.b)(),n=Object(b.c)(p);return Object(N.jsx)("div",{className:"".concat(w.a.space," ").concat(e.seat?w.a.seat:""," ").concat(e.seat&&e.seat.reserved?w.a.reserved:e.seat&&n.seatsSelected.some((function(t){return t.id===e.seat.id}))?w.a.selected:""),onClick:function(){e.seat&&!e.seat.reserved&&(n.seatsSelected.some((function(t){return t.id===e.seat.id}))?t(v(e.seat)):n.seatsSelected.some((function(t){return t.id===e.seat.id}))||t(x(e.seat)))}})},k=function(e){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"".concat(w.a.space," ").concat(w.a.seat," ").concat(e.type&&w.a[e.type]," ").concat(w.a.info)}),Object(N.jsx)("div",{className:w.a.infoText,children:e.name})]})},_=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=n.filter((function(e){return!e.reserved}));if(e>c.length||e<=0)return[];if(t){for(var s=function(t){for(var n=c.filter((function(e){return e.cords.x===t})),s=0;s<n.length-e+1;s++){var r=n.slice(s,e+s);r[e-1].cords.y-r[0].cords.y===e-1&&a.push(r)}},r=0;r<c[c.length-1].cords.x+1;r++)s(r);a=a[Math.floor(Math.random()*a.length)]?a[Math.floor(Math.random()*a.length)]:[]}else if(!t){for(var i=new Set;Object(l.a)(i).length<e;)i.add(c[Math.floor(Math.random()*c.length)]);a=Object(l.a)(i)}return a},z=n(37),M=n.n(z);function C(){var e=Object(b.b)(),t=Object(o.f)(),n=Object(b.c)(p),c=Object(a.useState)([]),s=Object(j.a)(c,2),r=s[0],i=s[1],m=Object(a.useState)([]),h=Object(j.a)(m,2),f=h[0],O=h[1],v=Object(a.useState)({x:0,y:0}),y=Object(j.a)(v,2),g=y[0],w=y[1];Object(a.useEffect)((function(){M.a.get("/cinema/db.json").then((function(e){return e.data.seats})).catch((function(e){console.log(e)})).then((function(e){var t=Math.max.apply(Math,Object(l.a)(e.map((function(e){return e.cords.x}))))+1,n=Math.max.apply(Math,Object(l.a)(e.map((function(e){return e.cords.y}))))+1;w({x:t,y:n}),i(e),O(function(e,t,n){var a=Array.from(Array(t),(function(){return new Array(n).fill(null)}));return e.forEach((function(e){a[e.cords.x][e.cords.y]=e})),a}(e,t,n))}))}),[]),Object(a.useEffect)((function(){n.seatsSelected.length||_(n.seatsNumber,n.seatsNext,r).forEach((function(t){return e(x(t))}))}),[e,r,n]);return Object(N.jsxs)(d.a,{className:"d-flex flex-column vh-100 justify-content-center align-items-center",children:[Object(N.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(g.y,", min(5vh, 5vw))"),gap:"min(1vh, 1vw)"},children:f.map((function(e,t){return e.map((function(e,n){return Object(N.jsx)(S,{seat:e},"s".concat(t).concat(n))}))}))}),Object(N.jsxs)("div",{className:"d-flex vw-100 mt-5 justify-content-center align-items-center",children:[Object(N.jsxs)("div",{className:"d-flex align-items-center",children:[Object(N.jsx)(k,{name:"Miejsca Dost\u0119pne",type:""}),Object(N.jsx)(k,{name:"Miejsca zarezerwowane",type:"reserved"}),Object(N.jsx)(k,{name:"Tw\xf3j wyb\xf3r",type:"selected"})]}),Object(N.jsx)(u.a,{className:"rounded-0",variant:"outline-dark",onClick:function(){t.push("/summary")},style:{fontSize:"min(1.75vw, 1.75vh)",minWidth:"min(20vw, 20vh)",minHeight:"min(5vw, 5vh)"},children:"Rezerwuj"})]})]})}var R=n(74),T=n(38);function W(){var e=Object(b.b)(),t=Object(o.f)(),n=Object(b.c)(p),c=Object(a.useState)(n.seatsNumber),s=Object(j.a)(c,2),r=s[0],i=s[1],l=Object(a.useState)(n.seatsNext),m=Object(j.a)(l,2),h=m[0],f=m[1];return Object(N.jsx)(d.a,{className:"d-flex vh-100 justify-content-center align-items-center",children:Object(N.jsxs)(R.a,{onSubmit:function(n){n.preventDefault(),e(O({seatsNumber:r,seatsNext:h})),t.push("/reservation")},children:[Object(N.jsxs)(R.a.Group,{as:R.a.Row,controlId:"formSeatsNumber",children:[Object(N.jsx)(R.a.Label,{column:!0,children:"Liczba miejsc:"}),Object(N.jsx)(T.a,{children:Object(N.jsx)(R.a.Control,{type:"number",value:r,onChange:function(e){return i(parseInt(e.target.value))},required:!0})})]}),Object(N.jsx)(R.a.Group,{children:Object(N.jsx)(R.a.Check,{label:"Czy miejsca maj\u0105 by\u0107 obok siebie?",checked:h,onChange:function(e){return f(e.target.checked)}})}),Object(N.jsx)(u.a,{block:!0,type:"submit",className:"rounded-0",variant:"outline-dark",style:{height:"50px"},children:"Wybierz miejsca"})]})})}function E(){var e=Object(b.c)(p);return Object(N.jsxs)(d.a,{className:"ml-4",children:[Object(N.jsx)("h3",{className:"font-weight-bold mt-4",children:"Twoja rezerwacja przebieg\u0142a pomy\u015blnie!"}),Object(N.jsx)("p",{className:"mt-4",children:"Wybra\u0142e\u015b miejsca:"}),Object(N.jsx)("ul",{children:e.seatsSelected.map((function(e){return Object(N.jsxs)("li",{children:["rz\u0105d ",e.cords.x,", miejsce ",e.cords.y," (",e.id,")"]},e.id)}))}),Object(N.jsx)("p",{className:"font-weight-bold mt-5",children:"Dzi\u0119kujemy! W razie problem\xf3w prosimy o kontakt z dzie\u0142em administracji."})]})}n(70);var A=function(){return Object(N.jsx)(i.a,{children:Object(N.jsxs)(o.c,{children:[Object(N.jsx)(o.a,{path:"/reservation",children:Object(N.jsx)(C,{})}),Object(N.jsx)(o.a,{path:"/summary",children:Object(N.jsx)(E,{})}),Object(N.jsx)(o.a,{path:"/",children:Object(N.jsx)(W,{})})]})})},D=Object(m.a)({reducer:{cinema:y}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(71);r.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(b.a,{store:D,children:Object(N.jsx)(A,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[72,1,2]]]);
//# sourceMappingURL=main.dc8ae28f.chunk.js.map