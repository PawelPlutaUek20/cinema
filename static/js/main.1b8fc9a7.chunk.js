(this.webpackJsonpkino=this.webpackJsonpkino||[]).push([[0],{12:function(e,t,n){e.exports={space:"Reservation_space__3DaUI",seat:"Reservation_seat__3xJMx",reserved:"Reservation_reserved__2C3OL",selected:"Reservation_selected__3dpJc",info:"Reservation_info__2soKp",infoText:"Reservation_infoText__2CHoA"}},44:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(18),r=n.n(s),i=(n(44),n(39)),o=n(6),l=n(14),j=n(73),d=n(75),u=n(8),b=n(17),m=n(21),f=Object(m.b)({name:"cinema",initialState:{seatsSelected:[],seatsNumber:0,seatsNext:!0},reducers:{makeReservation:function(e,t){e.seatsSelected=[],e.seatsNumber=t.payload.seatsNumber,e.seatsNext=t.payload.seatsNext},select:function(e,t){e.seatsSelected=[].concat(Object(b.a)(e.seatsSelected),[t.payload])},unselect:function(e,t){e.seatsSelected=e.seatsSelected.filter((function(e){return e.id!==t.payload.id}))}}}),h=f.actions,O=h.makeReservation,x=h.select,v=h.unselect,p=function(e){return e.cinema},y=f.reducer,g=n(12),w=n.n(g),N=n(2),S=function(e){var t=Object(u.b)(),n=Object(u.c)(p);return Object(N.jsx)("div",{className:"".concat(w.a.space," ").concat(e.seat?w.a.seat:""," ").concat(e.seat&&e.seat.reserved?w.a.reserved:e.seat&&n.seatsSelected.some((function(t){return t.id===e.seat.id}))?w.a.selected:""),onClick:function(){e.seat&&!e.seat.reserved&&(n.seatsSelected.some((function(t){return t.id===e.seat.id}))?t(v(e.seat)):n.seatsSelected.some((function(t){return t.id===e.seat.id}))||t(x(e.seat)))}})},k=function(e){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"".concat(w.a.space," ").concat(w.a.seat," ").concat(e.type&&w.a[e.type]," ").concat(w.a.info)}),Object(N.jsx)("div",{className:w.a.infoText,children:e.name})]})},_=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=n.filter((function(e){return!e.reserved}));if(e>a.length||e<=0)return[];if(t){for(var s=function(t){for(var n=a.filter((function(e){return e.cords.x===t})),s=0;s<n.length-e+1;s++){var r=n.slice(s,e+s);r[e-1].cords.y-r[0].cords.y===e-1&&c.push(r)}},r=0;r<a[a.length-1].cords.x+1;r++)s(r);c=c[Math.floor(Math.random()*c.length)]?c[Math.floor(Math.random()*c.length)]:[]}else if(!t){for(var i=new Set;Object(b.a)(i).length<e;)i.add(a[Math.floor(Math.random()*a.length)]);c=Object(b.a)(i)}return c},z=n(37),C=n.n(z);function M(){var e=Object(u.b)(),t=Object(o.f)(),n=Object(u.c)(p),a=Object(c.useState)([]),s=Object(l.a)(a,2),r=s[0],i=s[1],b=Object(c.useState)([]),m=Object(l.a)(b,2),f=m[0],h=m[1];Object(c.useEffect)((function(){C.a.get("/cinema/db.json").then((function(e){return e.data.seats})).catch((function(e){console.log(e)})).then((function(e){i(e),h(function(e){var t=Array.from(Array(10),(function(){return new Array(15).fill(null)}));return e.forEach((function(e){t[e.cords.x][e.cords.y]=e})),t}(e))}))}),[]),Object(c.useEffect)((function(){n.seatsSelected.length||_(n.seatsNumber,n.seatsNext,r).forEach((function(t){return e(x(t))}))}),[e,r,n]);return Object(N.jsxs)(j.a,{className:"d-flex flex-column vh-100 justify-content-center align-items-center",children:[Object(N.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(15,", min(5vh, 5vw))"),gap:"min(1vh, 1vw)"},children:f.map((function(e,t){return e.map((function(e,n){return Object(N.jsx)(S,{seat:e},"s".concat(t).concat(n))}))}))}),Object(N.jsxs)("div",{className:"d-flex vw-100 mt-5 justify-content-center align-items-center",children:[Object(N.jsxs)("div",{className:"d-flex align-items-center",children:[Object(N.jsx)(k,{name:"Miejsca Dost\u0119pne",type:""}),Object(N.jsx)(k,{name:"Miejsca zarezerwowane",type:"reserved"}),Object(N.jsx)(k,{name:"Tw\xf3j wyb\xf3r",type:"selected"})]}),Object(N.jsx)(d.a,{className:"rounded-0",variant:"outline-dark",onClick:function(){t.push("/summary")},style:{fontSize:"min(1.75vw, 1.75vh)",minWidth:"min(20vw, 20vh)",minHeight:"min(5vw, 5vh)"},children:"Rezerwuj"})]})]})}var R=n(74),T=n(38);function W(){var e=Object(u.b)(),t=Object(o.f)(),n=Object(u.c)(p),a=Object(c.useState)(n.seatsNumber),s=Object(l.a)(a,2),r=s[0],i=s[1],b=Object(c.useState)(n.seatsNext),m=Object(l.a)(b,2),f=m[0],h=m[1];return Object(N.jsx)(j.a,{className:"d-flex vh-100 justify-content-center align-items-center",children:Object(N.jsxs)(R.a,{onSubmit:function(n){n.preventDefault(),e(O({seatsNumber:r,seatsNext:f})),t.push("/reservation")},children:[Object(N.jsxs)(R.a.Group,{as:R.a.Row,controlId:"formSeatsNumber",children:[Object(N.jsx)(R.a.Label,{column:!0,children:"Liczba miejsc:"}),Object(N.jsx)(T.a,{children:Object(N.jsx)(R.a.Control,{type:"number",value:r,onChange:function(e){return i(parseInt(e.target.value))}})})]}),Object(N.jsx)(R.a.Group,{children:Object(N.jsx)(R.a.Check,{label:"Czy miejsca maj\u0105 by\u0107 obok siebie?",checked:f,onChange:function(e){return h(e.target.checked)}})}),Object(N.jsx)(d.a,{block:!0,type:"submit",className:"rounded-0",variant:"outline-dark",style:{height:"50px"},children:"Wybierz miejsca"})]})})}function E(){var e=Object(u.c)(p);return Object(N.jsxs)(j.a,{className:"ml-4",children:[Object(N.jsx)("h3",{className:"font-weight-bold mt-4",children:"Twoja rezerwacja przebieg\u0142a pomy\u015blnie!"}),Object(N.jsx)("p",{className:"mt-4",children:"Wybra\u0142e\u015b miejsca:"}),Object(N.jsx)("ul",{children:e.seatsSelected.map((function(e){return Object(N.jsxs)("li",{children:["rz\u0105d ",e.cords.x,", miejsce ",e.cords.y," (",e.id,")"]},e.id)}))}),Object(N.jsx)("p",{className:"font-weight-bold mt-5",children:"Dzi\u0119kujemy! W razie problem\xf3w prosimy o kontakt z dzie\u0142em administracji."})]})}n(70);var A=function(){return Object(N.jsx)(i.a,{children:Object(N.jsxs)(o.c,{children:[Object(N.jsx)(o.a,{path:"/reservation",children:Object(N.jsx)(M,{})}),Object(N.jsx)(o.a,{path:"/summary",children:Object(N.jsx)(E,{})}),Object(N.jsx)(o.a,{path:"/",children:Object(N.jsx)(W,{})})]})})},D=Object(m.a)({reducer:{cinema:y}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(71);r.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(u.a,{store:D,children:Object(N.jsx)(A,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[72,1,2]]]);
//# sourceMappingURL=main.1b8fc9a7.chunk.js.map